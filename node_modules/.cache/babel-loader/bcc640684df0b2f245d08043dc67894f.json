{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setWsHeartbeat = void 0;\nfunction setWsHeartbeat(ws, pingMessage, option) {\n  var pingInterval = 25000;\n  var pingTimeout = 60000;\n  if (option) {\n    if (typeof option.pingInterval === \"number\") {\n      pingInterval = option.pingInterval;\n    }\n    if (typeof option.pingTimeout === \"number\") {\n      pingTimeout = option.pingTimeout;\n    }\n  }\n  var messageAccepted = false;\n  ws.addEventListener(\"message\", function (e) {\n    messageAccepted = true;\n  });\n  var pingTimer = setInterval(function () {\n    try {\n      ws.send(pingMessage);\n    } catch (_) {\n      // do nothing\n    }\n  }, pingInterval);\n  var timeoutTimer = setInterval(function () {\n    if (!messageAccepted) {\n      ws.close();\n    } else {\n      messageAccepted = false;\n    }\n  }, pingTimeout);\n  ws.addEventListener(\"close\", function (e) {\n    clearInterval(pingTimer);\n    clearInterval(timeoutTimer);\n  });\n}\nexports.setWsHeartbeat = setWsHeartbeat;","map":null,"metadata":{},"sourceType":"script"}