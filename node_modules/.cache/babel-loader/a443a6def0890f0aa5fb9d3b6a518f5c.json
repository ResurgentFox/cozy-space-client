{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setWsHeartbeat = void 0;\n\nfunction setWsHeartbeat(ws, pingMessage, option) {\n  var pingInterval = 25000;\n  var pingTimeout = 60000;\n\n  if (option) {\n    if (typeof option.pingInterval === \"number\") {\n      pingInterval = option.pingInterval;\n    }\n\n    if (typeof option.pingTimeout === \"number\") {\n      pingTimeout = option.pingTimeout;\n    }\n  }\n\n  var messageAccepted = false;\n  ws.addEventListener(\"message\", function (e) {\n    messageAccepted = true;\n  });\n  var pingTimer = setInterval(function () {\n    try {\n      ws.send(pingMessage);\n    } catch (_) {// do nothing\n    }\n  }, pingInterval);\n  var timeoutTimer = setInterval(function () {\n    if (!messageAccepted) {\n      ws.close();\n    } else {\n      messageAccepted = false;\n    }\n  }, pingTimeout);\n  ws.addEventListener(\"close\", function (e) {\n    clearInterval(pingTimer);\n    clearInterval(timeoutTimer);\n  });\n}\n\nexports.setWsHeartbeat = setWsHeartbeat;","map":{"version":3,"sources":["D:/programming/network.v1/cozy-space-client/node_modules/ws-heartbeat/client.js"],"names":["Object","defineProperty","exports","value","setWsHeartbeat","ws","pingMessage","option","pingInterval","pingTimeout","messageAccepted","addEventListener","e","pingTimer","setInterval","send","_","timeoutTimer","close","clearInterval"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,cAAR,GAAyB,KAAK,CAA9B;;AACA,SAASA,cAAT,CAAwBC,EAAxB,EAA4BC,WAA5B,EAAyCC,MAAzC,EAAiD;AAC7C,MAAIC,YAAY,GAAG,KAAnB;AACA,MAAIC,WAAW,GAAG,KAAlB;;AACA,MAAIF,MAAJ,EAAY;AACR,QAAI,OAAOA,MAAM,CAACC,YAAd,KAA+B,QAAnC,EAA6C;AACzCA,MAAAA,YAAY,GAAGD,MAAM,CAACC,YAAtB;AACH;;AACD,QAAI,OAAOD,MAAM,CAACE,WAAd,KAA8B,QAAlC,EAA4C;AACxCA,MAAAA,WAAW,GAAGF,MAAM,CAACE,WAArB;AACH;AACJ;;AACD,MAAIC,eAAe,GAAG,KAAtB;AACAL,EAAAA,EAAE,CAACM,gBAAH,CAAoB,SAApB,EAA+B,UAAUC,CAAV,EAAa;AACxCF,IAAAA,eAAe,GAAG,IAAlB;AACH,GAFD;AAGA,MAAIG,SAAS,GAAGC,WAAW,CAAC,YAAY;AACpC,QAAI;AACAT,MAAAA,EAAE,CAACU,IAAH,CAAQT,WAAR;AACH,KAFD,CAGA,OAAOU,CAAP,EAAU,CACN;AACH;AACJ,GAP0B,EAOxBR,YAPwB,CAA3B;AAQA,MAAIS,YAAY,GAAGH,WAAW,CAAC,YAAY;AACvC,QAAI,CAACJ,eAAL,EAAsB;AAClBL,MAAAA,EAAE,CAACa,KAAH;AACH,KAFD,MAGK;AACDR,MAAAA,eAAe,GAAG,KAAlB;AACH;AACJ,GAP6B,EAO3BD,WAP2B,CAA9B;AAQAJ,EAAAA,EAAE,CAACM,gBAAH,CAAoB,OAApB,EAA6B,UAAUC,CAAV,EAAa;AACtCO,IAAAA,aAAa,CAACN,SAAD,CAAb;AACAM,IAAAA,aAAa,CAACF,YAAD,CAAb;AACH,GAHD;AAIH;;AACDf,OAAO,CAACE,cAAR,GAAyBA,cAAzB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setWsHeartbeat = void 0;\nfunction setWsHeartbeat(ws, pingMessage, option) {\n    var pingInterval = 25000;\n    var pingTimeout = 60000;\n    if (option) {\n        if (typeof option.pingInterval === \"number\") {\n            pingInterval = option.pingInterval;\n        }\n        if (typeof option.pingTimeout === \"number\") {\n            pingTimeout = option.pingTimeout;\n        }\n    }\n    var messageAccepted = false;\n    ws.addEventListener(\"message\", function (e) {\n        messageAccepted = true;\n    });\n    var pingTimer = setInterval(function () {\n        try {\n            ws.send(pingMessage);\n        }\n        catch (_) {\n            // do nothing\n        }\n    }, pingInterval);\n    var timeoutTimer = setInterval(function () {\n        if (!messageAccepted) {\n            ws.close();\n        }\n        else {\n            messageAccepted = false;\n        }\n    }, pingTimeout);\n    ws.addEventListener(\"close\", function (e) {\n        clearInterval(pingTimer);\n        clearInterval(timeoutTimer);\n    });\n}\nexports.setWsHeartbeat = setWsHeartbeat;\n"]},"metadata":{},"sourceType":"script"}