{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setWsHeartbeat = void 0;\nfunction setWsHeartbeat(ws, pingMessage, option) {\n  var pingInterval = 25000;\n  var pingTimeout = 60000;\n  if (option) {\n    if (typeof option.pingInterval === \"number\") {\n      pingInterval = option.pingInterval;\n    }\n    if (typeof option.pingTimeout === \"number\") {\n      pingTimeout = option.pingTimeout;\n    }\n  }\n  var messageAccepted = false;\n  ws.addEventListener(\"message\", function (e) {\n    messageAccepted = true;\n  });\n  var pingTimer = setInterval(function () {\n    try {\n      ws.send(pingMessage);\n    } catch (_) {\n      // do nothing\n    }\n  }, pingInterval);\n  var timeoutTimer = setInterval(function () {\n    if (!messageAccepted) {\n      ws.close();\n    } else {\n      messageAccepted = false;\n    }\n  }, pingTimeout);\n  ws.addEventListener(\"close\", function (e) {\n    clearInterval(pingTimer);\n    clearInterval(timeoutTimer);\n  });\n}\nexports.setWsHeartbeat = setWsHeartbeat;","map":{"version":3,"names":["Object","defineProperty","exports","value","setWsHeartbeat","ws","pingMessage","option","pingInterval","pingTimeout","messageAccepted","addEventListener","e","pingTimer","setInterval","send","_","timeoutTimer","close","clearInterval"],"sources":["D:/programming/network.v1/cozy-space-client/node_modules/ws-heartbeat/client.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setWsHeartbeat = void 0;\nfunction setWsHeartbeat(ws, pingMessage, option) {\n    var pingInterval = 25000;\n    var pingTimeout = 60000;\n    if (option) {\n        if (typeof option.pingInterval === \"number\") {\n            pingInterval = option.pingInterval;\n        }\n        if (typeof option.pingTimeout === \"number\") {\n            pingTimeout = option.pingTimeout;\n        }\n    }\n    var messageAccepted = false;\n    ws.addEventListener(\"message\", function (e) {\n        messageAccepted = true;\n    });\n    var pingTimer = setInterval(function () {\n        try {\n            ws.send(pingMessage);\n        }\n        catch (_) {\n            // do nothing\n        }\n    }, pingInterval);\n    var timeoutTimer = setInterval(function () {\n        if (!messageAccepted) {\n            ws.close();\n        }\n        else {\n            messageAccepted = false;\n        }\n    }, pingTimeout);\n    ws.addEventListener(\"close\", function (e) {\n        clearInterval(pingTimer);\n        clearInterval(timeoutTimer);\n    });\n}\nexports.setWsHeartbeat = setWsHeartbeat;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,cAAc,GAAG,KAAK,CAAC;AAC/B,SAASA,cAAcA,CAACC,EAAE,EAAEC,WAAW,EAAEC,MAAM,EAAE;EAC7C,IAAIC,YAAY,GAAG,KAAK;EACxB,IAAIC,WAAW,GAAG,KAAK;EACvB,IAAIF,MAAM,EAAE;IACR,IAAI,OAAOA,MAAM,CAACC,YAAY,KAAK,QAAQ,EAAE;MACzCA,YAAY,GAAGD,MAAM,CAACC,YAAY;IACtC;IACA,IAAI,OAAOD,MAAM,CAACE,WAAW,KAAK,QAAQ,EAAE;MACxCA,WAAW,GAAGF,MAAM,CAACE,WAAW;IACpC;EACJ;EACA,IAAIC,eAAe,GAAG,KAAK;EAC3BL,EAAE,CAACM,gBAAgB,CAAC,SAAS,EAAE,UAAUC,CAAC,EAAE;IACxCF,eAAe,GAAG,IAAI;EAC1B,CAAC,CAAC;EACF,IAAIG,SAAS,GAAGC,WAAW,CAAC,YAAY;IACpC,IAAI;MACAT,EAAE,CAACU,IAAI,CAACT,WAAW,CAAC;IACxB,CAAC,CACD,OAAOU,CAAC,EAAE;MACN;IAAA;EAER,CAAC,EAAER,YAAY,CAAC;EAChB,IAAIS,YAAY,GAAGH,WAAW,CAAC,YAAY;IACvC,IAAI,CAACJ,eAAe,EAAE;MAClBL,EAAE,CAACa,KAAK,CAAC,CAAC;IACd,CAAC,MACI;MACDR,eAAe,GAAG,KAAK;IAC3B;EACJ,CAAC,EAAED,WAAW,CAAC;EACfJ,EAAE,CAACM,gBAAgB,CAAC,OAAO,EAAE,UAAUC,CAAC,EAAE;IACtCO,aAAa,CAACN,SAAS,CAAC;IACxBM,aAAa,CAACF,YAAY,CAAC;EAC/B,CAAC,CAAC;AACN;AACAf,OAAO,CAACE,cAAc,GAAGA,cAAc"},"metadata":{},"sourceType":"script","externalDependencies":[]}